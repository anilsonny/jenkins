/*home page tabs start*/
var baseUrl = jQuery('#base_url_js').val();


jQuery(document).ready(function(){
  var myElement=document.querySelector(".header-container");
  var headroom=new Headroom(myElement);
  headroom.init();
});
jQuery(document).ready(function() {
   var windowHeight = jQuery(document).height();
  var documentHeight = window.innerHeight;
  var docHeight = jQuery(document).height(),
    scrollTop = jQuery(document).scrollTop(),
    documentHeightNew = window.innerHeight;
  window.onload = function() {
    setTimeout (function () {
      scrollTo(0,0);
    }, 100); 
  }
  jQuery('.scroll-icon').click(function () {
    jQuery('html, body').animate({scrollTop: '+=' + documentHeight}, 800);
  });
  jQuery(window).scroll(function() {
  var windowHeightNew = jQuery(document).height() - documentHeight;
      if (jQuery(this).scrollTop() >= windowHeightNew) { // this refers to window
        jQuery('.scroll-icon').hide();
      }
      else{       
         jQuery('.scroll-icon').show();
      }
  });

  /**********mini cart custom scroll**************/
  jQuery(".scroll-added, .totalreview_section").mCustomScrollbar();
  jQuery(".messages").delay(6000).fadeOut();   
  jQuery('.messages ul li').after('<span id="noteClose">X</span>');
  jQuery("#noteClose").click(function(){
      jQuery(".messages").fadeOut();
    });      
 

  /**********Home page banner slider start**************/
  jQuery('.slider').owlCarousel({
      items:1,
      margin:0,
      stagePadding:0,
      smartSpeed:450,
      nav:true,
      loop:true,
      dots:false,
      autoplay:true,
    autoplayTimeout:4000,
    autoplayHoverPause:true
  });
  /**********Home page banner slider End**************/

    /**********Home page Brands slider start**************/
  jQuery('.home_page_brands').owlCarousel({
      loop:true,
      margin:15,
      nav:true,
      dots:false,
      items:6,
      responsive:{
        1024:{
          items:4
        },
        1280:{
          items:5
        },
        1366:{
          items:5
        },
        1680:{
          items:6
        }
      } 
  });
  /**********Home page Brands slider End**************/

    jQuery('#tabs .tab_title').click(function(e) {
        e.preventDefault();
        jQuery('span').removeClass('active');
        jQuery(this).addClass('active');
    });
/**********Product tabs start************/
         sincerely('trendingproduct');   
         jQuery('#trending_product').click(function(){
            jQuery(".featured_pro_loader").css("display","block");
            sincerely('trendingproduct');
         });
         jQuery('#featured_product').click(function(){
            jQuery(".featured_pro_loader").css("display","block");
            sincerely('featuredproduct');
         });         
         jQuery('#best_sellers').click(function(){
           jQuery(".featured_pro_loader").css("display","block");
           sincerely('bestsellers');
         });
/**********Product tabs End*************/

  /* hiding PDP description &nbsp; */
  jQuery(".product_des").each(function() {
      var $this = jQuery(this);
      $this.html($this.html().replace(/&nbsp;/g, ''));
  });



jQuery('.minicart-close').click(function() {
    jQuery('.cart-items-box1').hide();
    
});
  jQuery('.cart-btn').mouseover(function () {
      jQuery('.cart-items-box1').show();      
});

});

/*home page tabs End*/


jQuery(document).ready(function() {
  //jQuery('#login_popup_section,#write_review_logout,#email_share_not_login').click(function(){
   jQuery(document).on('click','#login_popup_section,#write_review_logout,#email_share_not_login',function(){
  jQuery('.pp-layer, .account-login').show();
  jQuery('.login_form').show();
  jQuery('.register_form').hide();
  jQuery('.forgot_form').hide();
  jQuery('.msg').hide();
  });

  

  jQuery('.reg_icon').click(function(){
    jQuery('.pp-layer, .account-create').show();
    jQuery('.login_form').hide();
    jQuery('.register_form').show();
    jQuery('.forgot_form').hide();
  });

  jQuery('.pp-layer, .pp-close, .cancel_but').click(function(){
   //jQuery(document).on('click','.pp-layer, .pp-close, .cancel_but',function(){
     jQuery('.pp-layer, .account-login, .account-create, .forgot-password').hide();
  });

  /** Login Form Show/Hide **/
 // jQuery('.login_icon').click(function(e) {
jQuery(document).on('click','.login_icon',function(e){
     e.stopPropagation();
    jQuery('.registered-users').show();
    jQuery('.new-users, .forgot-password').hide();
  });

  
  //jQuery('.registered-users').click(function(e){
    jQuery(document).on('click','.registered-users',function(e){
    e.stopPropagation();
  });

  /** Register Form Show/Hide   **/
  //jQuery('.reg_icon').click(function(e) {
    jQuery(document).on('click','.reg_icon',function(e){
    e.stopPropagation();
    jQuery('.new-users').show();
    jQuery('.registered-users').hide();
  });
  //jQuery('.new-users').click(function(e){
    jQuery(document).on('click','.new-users',function(e){
    e.stopPropagation();
  });


  /** Forgotpassword form show/hide **/
  jQuery('.f-pwd').click(function(e) {
   jQuery('.pp-layer, .account-create').show();
   e.stopPropagation();
    jQuery('.forgot-password').show();
  jQuery('.login_form').show();
  jQuery('.register_form').hide();
  jQuery('.forgot_form').show();
  jQuery('.registered-users, .new-users').hide();
  jQuery('.error-msg').hide();
  });

  //jQuery('.forgot-password').click(function(e){
    jQuery(document).on('click','.forgot-password',function(e){
    e.stopPropagation();
  });

  /** Cart Items Show/Hide    **/
  jQuery('.cart-items').mouseover(function(){
    jQuery("#header-cart").show();
    jQuery("#header-cart").addClass('skip-active');
  });

  jQuery('#header-cart').mouseleave(function(){
    jQuery("#header-cart").hide();
  });

  /**  Review Show/Hide     **/
  jQuery('.review').click(function(e){ 
    e.stopPropagation();
  jQuery('.review-form').show();
  });
  jQuery('.review-form').click(function(e){
    e.stopPropagation();
  });

  
  jQuery('.close-review').click(function(){
     jQuery('.review-form').hide();
  });

  jQuery('.remove').click(function(){
     jQuery('#header-cart').show();
  });


  

  
        jQuery("#email").keyup(function()
        {
          var username = jQuery("#email").val();
          if(isNaN(username)){
            jQuery("#email").removeClass("validate-number validate-digits validate-mobileno validate-digits-moblie");
            jQuery("#email").addClass("validate-email");  
          }else{
            jQuery("#email").removeClass("validate-email");
            jQuery("#email").addClass("validate-number validate-digits validate-mobileno validate-digits-moblie");
          }
        });

       /*login form script*/
        var dataLoginForm = new VarienForm('login-form', true);       
        jQuery("#login-form").submit(function(event)
        {
           var email_val = jQuery("#email").val(); 
           var pass_val = jQuery("#pass").val();
           var login_validation = dataLoginForm.validator.validate();
           if(email_val != "" && pass_val != "")
           {
             jQuery(".validation-advice").css("display","none");
             login_validation = true;
           }
           jQuery(".login-loader").css("display","block");
            /* Stop form from submitting normally */
           event.preventDefault();
           
          if(login_validation == true)
          {       
                  
              /* Get some values from elements on the page: */
              var values = $(this).serialize();


            //console.log(values);
              /* Send the data using post and put the results in a div */
              jQuery.ajax({
                url:  baseUrl+"customer/account/loginPost/",
                type: "post",
                data: values,
                async :false,
                success: function(response)
                {
                   var object = response;

                  if(object.result!='success')
                  {
                        jQuery("#result").css("display", "block");                        
                        if(object.result.indexOf("error") > -1)
                        {                  
                            var result = object.result;
                            jQuery("#result").html(object.result);
                            window.setTimeout(function()
                            {
                                location.reload();
                            },1000);
                        }
                        else
                        {
                            jQuery("#result").html(object.result);
                        }   
                        jQuery(".login-loader").css("display","none");
                    }
                    
                    if(object.result == "success")
                    {                       
                 
                      var input_url = document.getElementById("login_wish_headers").value;
                      var pId = input_url;
                      var elem1 = document.getElementById("login_wish_headers");
                      elem1.value = "";
                      var input_url_pname = document.getElementById("login_wish_headers_pname").value;
                      var pName = input_url_pname;
                      var elem_pname = document.getElementById("login_wish_headers_pname");
                      elem_pname.value = "";
                      if(pId && pName)
                      {
                        
                        var url = baseUrl+'wishlist/index/ajaxadd/product/';
                        new Ajax.Request(url, {
                              method: 'post',
                               dataType : 'json',
                              parameters: {'product_id':pId,'product_name':pName,'logged_in_already':'no'},
                              onSuccess : function(response) {
                                  var result = response.responseText;
                                  var a = JSON.parse(result);
                                  if(a.status == 'SUCCESS')
                                  {
                                    jQuery("#email").val("");
                                    jQuery("#pass").val("");
                                    location.reload();
                                    return false;
                                      
                                  }
                              },
                              onFailure: function() {
                                jQuery("#result-wishlist").addClass("error-msg");
                                    jQuery("#result-wishlist").css("display", "block");
                                    jQuery("#result-wishlist").html("Error adding "+pName+" to your wishlist");
                              }

                            });
                      
                      }
                      else
                      {
                        var url = window.location.href; 
                        if(url.indexOf("cart")> -1 && jQuery("#cartpage").val() == "1") {   
                            if(object.mobile ==1 && object.verified == 1){
                                window.setTimeout(function(){
                                    window.location.href = baseUrl+"checkout/onepage";
                                },2000);
                            }else if(object.mobile ==1 && object.verified == 0){
                                jQuery("#pop_content1, #popup_wrap1, #popup_overlay1 , #login_form").fadeOut(400);
                                jQuery("#otp_content1, #otp_wrap1, #otp_overlay, #otp_wrap").fadeIn(400);
                                jQuery('#otp_content1').html(jQuery('#smsotp').show());
                                event.stopImmediatePropagation(); 
                            }else {
                                window.setTimeout(function(){
                                    window.location.href = baseUrl+"checkout/onepage";
                                },2000);
                            } 
                        }else{
                            window.setTimeout(function(){location.reload()},2000);
                        }
                        //return false;
                     }
                    }
                    jQuery("#email").val("");
                    jQuery("#pass").val("");
                    
                },
                error:function()
                {
                    jQuery("#email").val("");
                    jQuery("#pass").val("");
                    jQuery(".login-loader").css("display","none");
                    jQuery("#result").css("display", "block");
                    jQuery("#result").html("Some error occured. Please try again");
                      
                 }
              });
            }else{
                jQuery(".login-loader").css("display","none");
            }
        });

       /*register form script*/
       var dataRegisterForm = new VarienForm('form-validate', true);
        
  jQuery("#form-validate").submit(function(event)
    {
      var name_val = jQuery("#firstname").val();
      var mob_val = jQuery("#mobileno").val();
      var pass_val = jQuery("#password").val();
      var conf_val = jQuery("#confirmation").val();
      var reg_form = dataRegisterForm.validator.validate();
      if(name_val != "" && mob_val != "" && pass_val != "" && conf_val != "")
      {
        reg_form = true;
        jQuery(".validation-advice").css("display","none");
      }
    jQuery(".login-loader").css("display","block");
   /* Stop form from submitting normally */
    event.preventDefault();
    
   if(reg_form == true)
   {
    /* Get some values from elements on the page: */
    var values = jQuery(this).serialize();
   
    /* Send the data using post and put the results in a div */
   jQuery.ajax({
        url:  baseUrl+"customer/account/createPost/",
        type: "post",
        data: values,
        async :false,
        success: function(response)
        {
            jQuery(".login-loader").css("display","none");
            
           if(response=="success" || response=="Cannot save the customer.")
           {
                fbq('track', 'CompleteRegistration');  
                location.reload();
 
           }else
           {
                jQuery("#resultreg").css("display","block");
                jQuery("#resultreg").html(response);
           }
            
        },
        error:function(response){
           
           jQuery(".login-loader").css("display","none");
             jQuery("#resultreg").css("display","block");
            jQuery("#resultreg").html(response);
            
        }
    });
 
 
  }else{
  jQuery(".login-loader").css("display","none");
  }
});

/*forgot password script*/
jQuery("#forgot_email").keyup(function(){
        var username = jQuery("#forgot_email").val();
        if(isNaN(username)){
            jQuery("#forgot_email").removeClass("validate-number validate-digits validate-mobileno validate-digits-moblie");
            jQuery("#forgot_email").addClass("validate-email");  
        }else{
            jQuery("#forgot_email").removeClass("validate-email");
            jQuery("#forgot_email").addClass("validate-number validate-digits validate-mobileno validate-digits-moblie");
        }
    });
    
//<![CDATA[
    var dataForgotForm = new VarienForm('forgotform-validate', true);
    jQuery("#forgotform-validate").submit(function(event)
    {
      var for_mail = jQuery("#forgot_email").val();
      var for_check = dataForgotForm.validator.validate();
      if(for_mail != "")
      {
        for_check = true;
        jQuery(".validation-advice").css("display","none");
      }
    jQuery(".login-loader").css("display","block");
   /* Stop form from submitting normally */
    event.preventDefault();

    /* Clear result div*/
   if(for_check == true)
   {
    /* Get some values from elements on the page: */
    var values = jQuery(this).serialize();
    // alert(values);
    /* Send the data using post and put the results in a div */
    jQuery.ajax({
        url:  baseUrl+"customer/account/forgotPasswordPost/",
        type: "post",
        data: values,
        success: function(response)
        {
           jQuery(".login-loader").css("display","none");
           var msg = response;
           if(typeof msg =='object')
           {
              if(response.succ_msg)
              {
                
                jQuery(".success-msg").css("display", "block");
                jQuery(".success-msg").html(response.succ_msg);
                jQuery("#resultfor").html("").css("display", "none");
              }
              else
              {
                jQuery("#resultfor").css("display", "block");
                jQuery("#resultfor").html(response.result);
                jQuery(".success-msg").html("").css("display", "none");
              }
           }
                            
           
          //  window.location.reload();
            
        },
        error:function(){
            jQuery(".login-loader").css("display","none");
            jQuery("#resultfor").addClass("error-msg");
            jQuery("#resultfor").css("display", "block");
            jQuery("#resultfor").html(msg);
            //jQuery("#result").html('There is error while submit');
        }
    });
  }else{
    jQuery(".login-loader").css("display","none");
  }
});

   /*logout script*/
   jQuery('#logout').click(function(){
         jQuery("#load_animate").css("display","block");
         jQuery.ajax({
                type:"POST",
                url:baseUrl+"customer/account/logout/",
                data: '',
                async : false,
                success: function(response){                 
                }
            }).done( function(){
                   jQuery("#load_animate").css("display","none");    
                  window.setTimeout(function(){                               
                   document.location.href = baseUrl;
                  },1000);  
            });
   });
  
   jQuery(document).ajaxComplete(function()
   {
      jQuery("#cart-subtotal").text("lel");
   });

   var pathname = window.location.pathname;
   if(pathname.indexOf("referral-program") > -1)
   {
    jQuery("#pop_content1, #popup_wrap1, #popup_overlay1 , #login_form").fadeIn(400);
   } 

});

function sincerely(name){
           jQuery.ajax({
                type: "POST",
                url:  baseUrl+"customrouting/index/sincerely",                
                data:{'name':name},
                success: function(response){ 
                 jQuery(".featured_pro_loader").css("display","none");              
                 jQuery('#product_tabs').html(response);
                  var $owl = jQuery('#product_tabs');
                  $owl.trigger('destroy.owl.carousel');
                  $owl.html($owl.find('.owl-stage-outer').html()).removeClass('owl-loaded');
                  $owl.owlCarousel({                     
                  loop:true,
                  margin:15,
                  nav:true,
                  dots:false,
                  items:6,
                    responsive:{ 
                    1024:{
                        items:4
                      },                  
                    1280:{
                        items:5
                      },                  
                      1680:{
                        items:6
                      }
                    }                 
                  });
                }
            });
      }

function showLoginwishlist1(){
  jQuery('.pp-layer, .account-login').show();
  jQuery('.login_form').show();
  jQuery('.registered-users').show();
  jQuery('.register_form').hide();
  jQuery('.forgot_form').hide();
  jQuery('.msg').hide();
}

/*jQuery(".relative").mouseenter(function() {
    jQuery('.cart-items-box1').show();
}).mouseleave(function() {
    jQuery('.cart-items-box1').hide();
});*/


jQuery('.besteseller-slider').owlCarousel({
//    animateOut: 'fadeOut',
  margin:20,
  stagePadding:0,
  smartSpeed:450,
  nav:true,
  loop:true,
  dots:false,
  responsive:{
               0:{
                   items:1
               },
          480:{
                   items:1
               },
                600:{
                   items:2
               },
               800:{
                   items:3
               },
               1000:{
                   items:4
               }
           }
});



jQuery('.fetured-art-slider').owlCarousel({
//    animateOut: 'fadeOut',
    margin:20,
    stagePadding:0,
    smartSpeed:450,
  nav:true,
  loop:true,
  dots:false,
  responsive:{
               0:{
                   items:1
               },
          480:{
                   items:1
               },
                600:{
                   items:2
               },
               800:{
                   items:3
               },
               1000:{
                   items:3
               }
           }
});

jQuery('.testmonial-slider').owlCarousel({
//    animateOut: 'fadeOut',
    items:1,
    margin:0,
    stagePadding:0,
    smartSpeed:450,
  nav:true,
  loop:true,
  dots:false
});


jQuery(".le-social-button-login").click(function(event){
         //alert("dferere12111");
         event.preventDefault();
         return;
    });


function isNumberKey(evt){
    var charCode = (evt.which) ? evt.which : event.keyCode
    if (charCode > 31 && (charCode < 48 || charCode > 57))
        return false;
    return true;
}


